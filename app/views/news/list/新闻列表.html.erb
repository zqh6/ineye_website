<%= stylesheet_link_tag '//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css' %>

<div class="middle flow">
    <div class="newsAll">
    <ul class="newsAllList">
        <% if @new.present? %>
          <% @new.each do |new| %>
            <li>
                <%= link_to new.scan_rails_path.blank? ? news_path(new.id, from: 'db') : new.scan_rails_path do %>
                <p><%= new.title %><span class="fr"><%= new.occurred_at==Time.utc(1970) ? ' ' : (l new.occurred_at, format: :human_date) %></span></p>
                <% end %>
            </li>
          <% end %>
        <% end %>
    </ul>
    <div class="paginate-container"><%= will_paginate @new, renderer: BootstrapPagination::Rails %></div>
    <!--<div class="flow pagesContainer">
        <div class="pages fr"></div>
    </div>-->
    </div>

</div>
<% content_for :script do %>
<script>
//    Turbolinks.pagesCached(0);
    var news={
        num:15
    }
    var html="";
    for(var i=1;i<=Math.ceil($(".newsAllList li").length/news.num);i++){
        html+="<span>"+i+"</span>"
    }
    $(".pages").html(html);
    $(".newsAllList li").eq(news.num-1).nextAll().hide();
    $(".pages span").click(function () {
        var i = $(this).index();
        console.log(i);
        $(".newsAllList li").show().eq(news.num*i).prevAll().hide();
        $(".newsAllList li").eq(news.num*(i+1)-1).nextAll().hide();
    })
</script>
<% end %>

<% content_for :style do %>
    <%= stylesheet_link_tag 'news/list/新闻列表' %>
<% end %>

