<style>
  .banner-box{width: 1200px;height:375px;position:relative;text-align:center;overflow: hidden;}
  .banner-box .img{width:5000px;position:absolute;top:0;left:0;}
  .banner-box .img li{float:left;}
  .banner-box img{  width: 1200px;  height: 375px}
  .banner-box .li{width:100%;position:absolute;left:0;bottom:10px;}
  .banner-box .li li{width:10px;height:10px;background:#fff;border-radius:50%;display:inline-block;margin:0 3px;cursor:pointer;}
  .banner-box .but{position: absolute;top:50%;margin-top:-30px;width:38px;height:60px;line-height:60px;text-align:center;font-size: 30px;background:rgba(0,0,0,0.5);color:#fff;font-family: '宋体';cursor:pointer;display: none;}
  .banner-box:hover .but{display:block;}
  .banner-box .but-left{left:0;}
  .banner-box .but-right{right:0;}
  .banner-box .li .index{background:#0284cf;border-radius:10px;}
  .banner-box .bar{ position: absolute; left: 0; bottom: 0; height: 5px; background-color: rgba(2,132,207,0.6); }
</style>
<div class="top">
  <div class="topShadow">
    <div class="flow whiteBg titNav">
      <div class="fl flow">
        <%= image_tag("logo.png") %>
      </div>
      <ul class="flParent fl flow nav topNav">
        <li><%= link_to :就诊,:medicals %></li>
        <li><%= link_to :教学科研,:sciences %></li>
        <li><%= link_to :新闻,:news_index %></li>
        <li><%= link_to :简介,home_path(:医院介绍) %></li>
      </ul>
      <div class="rightHeader">
        <div class="header flow header2">
         <ul class="fr headerMsg flParent">
           <li>
             <span><a href="javascript:;">注册</a> | <a href="javascript:;">登录</a></span>
           </li>
           <li>
            <span>咨询服务：<em class="tele">400 9900 766</em></span>
          </li>
         </ul>
        </div>
        <ul class="fr flParent func">
          <li class="appointment commit"><a href="javascript:;">预约医生</a></li>
          <li class="consult commit"><%= link_to :在线咨询,"http://put.zoosnet.net/LR/Chatpre.aspx?id=PUT57157670&cid=1492673497337873616010&lng=cn&sid=1494901384848349862390&p=http%3A//www.ineyehospital.com/main.asp&rf1=&rf2=&msg=&d=1494901387174",target: "_blank" %></li>
          <li class="commit eyeGame"><%= link_to :银海视觉训练中心,"http://171.221.236.106:5000/sw-amb/main.do",target: "_blank" %></li>
          <li class="search"><input type="text" placeholder="请输入关键字"><span><%= image_tag("search.png")%></span></li>
        </ul>
      </div>
    </div>
  </div>
</div>

<div class="topHeight"></div>
<!--修改轮播-->
<div class='banner-box'>
  <ul class='img'>
    <li>
      <%= link_to image_tag("banner1.png") %>
    </li>
    <li>
      <%= link_to image_tag("banner2.png") ,news_path(:成都中医药大学附属银海眼科医院引智引才建设一流学科) %>
    </li>
    <li>
      <%= link_to image_tag("banner3.png") %>
    </li>
  </ul>
  <ul class='li'></ul>
  <div class='but but-left'>&lt;</div>
  <div class='but but-right'>&gt;</div>
  <div class='bar'></div>
</div>
<!--修改轮播-->

<!--修改轮播2-->
<div class="content" style="width:1000px;height:300px;margin:30px auto;overflow:hidden;">
  <div id="slider">
    <%= link_to image_tag("banner1.png") %>
    <%= link_to image_tag("banner2.png") ,news_path(:成都中医药大学附属银海眼科医院引智引才建设一流学科) %>
    <%= link_to image_tag("banner3.png") %>
    <!--<a href="#"><img src="img/demo1.jpg"/></a>-->
    <!--<a href="#"><img src="img/demo2.jpg"/></a>-->
    <!--<a href="#"><img src="img/demo3.jpg"/></a>-->
    <!--<a href="#"><img src="img/demo4.jpg"/></a>-->
    <!--<a href="#"><img src="img/demo5.jpg"/></a>-->
    <!--<a href="#"><img src="img/demo6.jpg"/></a>-->
  </div>
</div>
<!--修改轮播2-->

<!--中间导航-->
<ul class="nav flow flParent centerNav">
  <li><%= link_to :走进银海,  :homes,class: :active %></li>
  <li><%= link_to :就医服务,  :medicals %></li>
  <li><%= link_to :六大中心,  :centers  %></li>
  <li><%= link_to :名医专家,  :experts  %></li>
  <li><%= link_to :教学科研,  :sciences %></li>
  <li><%= link_to :新闻中心,  :news_index %></li>
  <li><%= link_to :眼健康科普,:kepus %></li>
</ul>

<script>

    function pos() {
        var str = window.location.pathname == "/" ? "/homes" : window.location.pathname;
        $(".centerNav a").each(function () {
            if($(this).attr("href") == str){
                $(this).parent().addClass("active");
            }
        })
    }

    pos();

</script>
<script type="text/javascript">
    if(oTime){
        clearInterval(oTime);
        oTime = null;
    }
    var oSj = 5000;
    var i = 0;
    var bar = $(".banner-box .bar");
    var w =$(".banner-box").width()
    var oImg = $(".banner-box .img");//获取图片盒子
    var s = $(".banner-box li").length;
    var num = 3;
    if($(".banner-box .img li").size() <= num){
        var oImgfirst= $('.banner-box .img li:first').clone();//复制第一张图片
        oImg.append(oImgfirst);//将复制的第一张图片放到最后
        for (var j = 1; j <= num; j++) {
            $('.banner-box .li').append('<li></li>');
        }
    }

    var imgNum = 4;//获取图片数量

    //根据图片个数添加圆点按钮
    //给第一个按钮添加选中样式
    $('.banner-box .li li:first').addClass('index');


    //点击向右轮播
    $(".but-right").click(function(){
        int();
    });

    //点击向左轮播
    $(".but-left").click(function(){
        bar.stop().css('width',0);
        i--;
        if(i == -1){
            $('.banner-box .img').css('left',-(imgNum-1)*w);//用CSS进行图片位置变换，达到无缝拼接效果
            i = imgNum-2;
        }
        oImg.stop().animate({left:-i*w},500);//动画效果
        clearInterval(oTime);
        oTime = setInterval(function(){
            int();
        },oSj);
        barAniMate();//进度条函数动画效果
        $(".banner-box .li li").eq(i).addClass('index').siblings().removeClass('index');//给相应的按钮添加样式
    });

    //鼠标移动到圆点后轮播
    $(".banner-box .li li").hover(function() {
        clearInterval(oTime);//清除定时器
        bar.stop().css('width',0);
        var index = $(this).index();
        i=index;
        oImg.stop().animate({left:-index*w},500);//动画效果
        bar.stop().css('width',0);
        $(this).addClass('index').siblings().removeClass('index');//给相应的按钮添加样式
    },function(){
        barAniMate();//进度条函数动画效果
        oTime = setInterval(function(){
            int();
        },oSj);
    });

    //自动轮播
    var oTime = setInterval(function(){
        int();
    },oSj);

    barAniMate();//进度条函数动画效果

    //进度条函数动画效果
    function barAniMate(){
        bar.animate({width:'100%'},oSj,function(){
            $(this).css('width',0);
        });
    }

    //自动轮播函数
    function int(){
        bar.stop().css('width',0);
        i++;
        if(i == imgNum){
            oImg.css('left',0);//用CSS进行图片位置变换，达到无缝拼接效果
            i = 1;
        }
        oImg.stop().animate({left:-i*w},500);//动画效果
        barAniMate();//进度条函数动画效果
        clearInterval(oTime);
        oTime = setInterval(function(){
            int();
        },oSj);
        if(i == imgNum-1){
            $(".banner-box .li li").eq(0).addClass('index').siblings().removeClass('index');//给相应的按钮添加样式

        }else{
            $(".banner-box .li li").eq(i).addClass('index').siblings().removeClass('index');//给相应的按钮添加样式
        }
    }

//    jQuery(document).ready(function($) {
//
//        if (window.history && window.history.pushState) {
//
//            $(window).on('popstate', function() {
//                var hashLocation = location.hash;
//                var hashSplit = hashLocation.split("#!/");
//                var hashName = hashSplit[1];
//
//                if (hashName !== '') {
//                    var hash = window.location.hash;
//                    if (hash === '') {
//                        window.location.reload()
//                    }
//                }
//            });
//
//            window.history.pushState('forward', null, './#forward');
//        }
//
//    });
</script>
<script>
    ;(function($,undefined){var dataKey='vomoc';var ie6=!-[1,]&&!window.XMLHttpRequest;var effects={'fade':function(){var the=this,node=the.node,opts=the.options;node.item.eq(the.index).css({display:'none',zIndex:2}).fadeIn(opts.speed,function(){the._afterTransfer();});}};$.fn.vmcSlider=function(settings){var run=$.type(settings)==='string',args=[].slice.call(arguments,1);if(!this.length)return;return this.each(function(){var $element=$(this),instance=$element.data(dataKey);if(run&&settings.charAt(0)!=='_'&&instance){vmcSlider.prototype[settings]&&vmcSlider.prototype[settings].apply(instance,args);}else if(!run&&!instance){instance=new vmcSlider($element,settings);instance._init();$element.data(dataKey,instance);}});};$.vmcSliderEffects=function(){if($.isPlainObject(arguments[0])){effects=$.extend({},effects,arguments[0]);}else{effects[arguments[0]]=arguments[1];}};var vmcSlider=function($element,settings){var the=this;the.options=$.extend({},the.options,settings);the.node={elem:$element};the.index=0;the.effectIndex=0;the.animateStatus=false;};vmcSlider.prototype.options={width:1000,height:330,gridCol:10,gridRow:5,gridVertical:20,gridHorizontal:10,autoPlay:true,ascending:true,effects:['fade'],ie6Tidy:false,random:false,duration:4000,speed:900};vmcSlider.prototype._init=function(){var the=this,node=the.node,opts=the.options;the._create();the._setSize();the._bind();node.item.eq(the.index).show();node.button.eq(the.index).addClass('vui-button-cur');if(true===opts.autoPlay){$(window).on('load',function(){the.time=setTimeout(function(){if(true===opts.ascending){the._next();}else{the._prev();}},opts.duration);});}};vmcSlider.prototype._create=function(){var the=this,node=the.node,opts=the.options,gridWidth,gridHeight;node.mimic=$('<div class="vui-slider"></div>');node.items=$('<div class="vui-items"></div>').appendTo(node.mimic);node.buttons=$('<div class="vui-buttons"></div>').appendTo(node.mimic);node.prev=$('<div class="vui-prev"></div>').appendTo(node.mimic);node.next=$('<div class="vui-next"></div>').appendTo(node.mimic);node.transfer=$('<div class="vui-transfer"></div>').appendTo(node.mimic);node.elem.children().each(function(){$('<div class="vui-item"></div>').append($(this)).appendTo(node.items);$('<div class="vui-button"></div>').appendTo(node.buttons);});node.item=node.items.children();node.button=node.buttons.children();node.elem.replaceWith(node.mimic);the.stageHtml=['','',''];gridWidth=opts.width/opts.gridCol;gridHeight=opts.height/opts.gridRow;for(var i=0;i<opts.gridCol*opts.gridRow;i++){var top=gridHeight*Math.floor(i/opts.gridCol);var left=gridWidth*(i%opts.gridCol);the.stageHtml[0]+='<div style="position:absolute;top:'+top+'px;left:'+left+'px;';the.stageHtml[0]+='width:'+gridWidth+'px;height:'+gridHeight+'px;background-position:-'+left+'px -'+top+'px;"></div>';}
        gridHeight=opts.height/opts.gridHorizontal;for(var i=0;i<opts.gridHorizontal;i++){the.stageHtml[1]+='<div style="position:absolute;top:'+(gridHeight*i)+'px;left:0;';the.stageHtml[1]+='width:'+opts.width+'px;height:'+gridHeight+'px;background-position:0 -'+(gridHeight*i)+'px;"></div>';}
        gridWidth=opts.width/opts.gridVertical;for(var i=0;i<opts.gridVertical;i++){the.stageHtml[2]+='<div style="position:absolute;top:0;left:'+(gridWidth*i)+'px;';the.stageHtml[2]+='width:'+gridWidth+'px;height:'+opts.height+'px;background-position:-'+(gridWidth*i)+'px 0;"></div>';}};vmcSlider.prototype._setSize=function(){var the=this,node=the.node,opts=the.options;node.mimic.width(opts.width).height(opts.height);node.buttons.css({left:(opts.width-node.buttons.width())/2});};vmcSlider.prototype._bind=function(){var the=this,node=the.node;node.button.on('click',function(){if(false===the.animateStatus){clearTimeout(the.time);the.index=$(this).index();the._play();}});node.prev.add(node.next).hover(function(){$(this).addClass('vui-sidebutton-hover');},function(){$(this).removeClass('vui-sidebutton-hover');}).on('click',function(){if(false===the.animateStatus){clearTimeout(the.time);if($(this).hasClass('vui-next')){the._next();}else{the._prev();}}});};vmcSlider.prototype._play=function(){var the=this,node=the.node,opts=the.options;node.button.eq(the.index).addClass('vui-button-cur').siblings().removeClass('vui-button-cur');if(opts.effects.length){the.animateStatus=true;node.transfer.children().stop(true);effects[the._getEffect()].call(the);}else{the._afterTransfer();}};vmcSlider.prototype._afterTransfer=function(){var the=this,node=the.node,opts=the.options;node.transfer.hide();node.item.css('zIndex',1).eq(the.index).show().siblings().hide();the.animateStatus=false;if(true===opts.autoPlay){the.time=setTimeout(function(){if(true===opts.ascending){the._next();}else{the._prev();}},opts.duration);}};vmcSlider.prototype._setStage=function(stage){var the=this,node=the.node;the.url=node.item.eq(the.index).find('img')[0].src;node.transfer.html(the.stageHtml[stage]).show().children().css({backgroundImage:'url('+the.url+')'});};vmcSlider.prototype._prev=function(){var the=this,node=the.node;the.index--;if(the.index<0){the.index=node.item.length-1;}
        the._play();};vmcSlider.prototype._next=function(){var the=this,node=the.node;the.index++;if(the.index>=node.item.length){the.index=0;}
        the._play();};vmcSlider.prototype._getEffect=function(){var the=this,opts=the.options;if(ie6&&opts.ie6Tidy){return'fade';}else{var i=0;if(opts.random===true){i=Math.floor(opts.effects.length*Math.random());}else{i=the.effectIndex;the.effectIndex++;if(the.effectIndex>=opts.effects.length){the.effectIndex=0;}}
        return opts.effects[i];}};$.vmcSliderEffects({'fadeTopLeft':function(){var the=this,node=the.node,opts=the.options;the._setStage(0);node.transfer.children().css({opacity:0}).each(function(i){var x=i%opts.gridCol;var y=Math.floor(i/opts.gridCol);var delay=((y+1)/opts.gridRow+(x+1)/opts.gridCol)/2;delay=opts.speed/3*2*delay;$(this).delay(delay).animate({opacity:1},opts.speed/3);}).last().queue(function(){the._afterTransfer();});},'fadeBottomRight':function(){var the=this,node=the.node,opts=the.options;the._setStage(0);node.transfer.children().css({opacity:0}).each(function(i){var x=i%opts.gridCol;var y=Math.floor(i/opts.gridCol);var delay=1-(y/opts.gridRow+x/opts.gridCol)/2;delay=opts.speed/3*2*delay;$(this).delay(delay).animate({opacity:1},opts.speed/3);}).first().queue(function(){the._afterTransfer();});},'fadeLeft':function(){var the=this,node=the.node,opts=the.options;the._setStage(2);node.transfer.children().css({opacity:0}).each(function(i){var delay=opts.speed/3*2/opts.gridVertical*(i+1);$(this).delay(delay).animate({opacity:1},opts.speed/3);}).last().queue(function(){the._afterTransfer();});},'fadeRight':function(){var the=this,node=the.node,opts=the.options;the._setStage(2);node.transfer.children().css({opacity:0}).each(function(i){var delay=opts.speed/3*2/opts.gridVertical*(opts.gridVertical-i);$(this).delay(delay).animate({opacity:1},opts.speed/3);}).first().queue(function(){the._afterTransfer();});},'fadeTop':function(){var the=this,node=the.node,opts=the.options;the._setStage(1);node.transfer.children().css({opacity:0}).each(function(i){var delay=opts.speed/3*2/opts.gridHorizontal*(i+1);$(this).delay(delay).animate({opacity:1},opts.speed/3);}).last().queue(function(){the._afterTransfer();});},'fadeBottom':function(){var the=this,node=the.node,opts=the.options;the._setStage(1);node.transfer.children().css({opacity:0}).each(function(i){var delay=opts.speed/3*2/opts.gridHorizontal*(opts.gridHorizontal-i);$(this).delay(delay).animate({opacity:1},opts.speed/3);}).first().queue(function(){the._afterTransfer();});},'blindsTopLeft':function(){var the=this,node=the.node,opts=the.options;the._setStage(0);node.transfer.children().css({width:0,height:0,opacity:0}).each(function(i){var x=i%opts.gridCol;var y=Math.floor(i/opts.gridCol);var delay=((y+1)/opts.gridRow+(x+1)/opts.gridCol)/2;delay=opts.speed/3*2*delay;$(this).delay(delay).animate({width:opts.width/opts.gridCol,height:opts.height/opts.gridRow,opacity:1},opts.speed/3);}).last().queue(function(){the._afterTransfer();});},'blindsBottomRight':function(){var the=this,node=the.node,opts=the.options;the._setStage(0);node.transfer.children().css({width:0,height:0,opacity:0}).each(function(i){var x=i%opts.gridCol;var y=Math.floor(i/opts.gridCol);var delay=1-(y/opts.gridRow+x/opts.gridCol)/2;delay=opts.speed/3*2*delay;$(this).delay(delay).animate({width:opts.width/opts.gridCol,height:opts.height/opts.gridRow,opacity:1},opts.speed/3);}).first().queue(function(){the._afterTransfer();});},'blindsLeft':function(){var the=this,node=the.node,opts=the.options;the._setStage(2);node.transfer.children().css({width:0,opacity:0}).each(function(i){var delay=opts.speed/3*2/opts.gridVertical*(i+1);$(this).delay(delay).animate({width:opts.width/opts.gridVertical,opacity:1},opts.speed/3);}).last().queue(function(){the._afterTransfer();});},'blindsRight':function(){var the=this,node=the.node,opts=the.options;the._setStage(2);node.transfer.children().css({width:0,opacity:0}).each(function(i){var delay=opts.speed/3*2/opts.gridVertical*(opts.gridVertical-i);$(this).delay(delay).animate({width:opts.width/opts.gridVertical,opacity:1},opts.speed/3);}).first().queue(function(){the._afterTransfer();});},'blindsTop':function(){var the=this,node=the.node,opts=the.options;the._setStage(1);node.transfer.children().css({height:0,opacity:0}).each(function(i){var delay=opts.speed/3*2/opts.gridHorizontal*(i+1);$(this).delay(delay).animate({height:opts.height/opts.gridHorizontal,opacity:1},opts.speed/3);}).last().queue(function(){the._afterTransfer();});},'blindsBottom':function(){var the=this,node=the.node,opts=the.options;the._setStage(1);node.transfer.children().css({height:0,opacity:0}).each(function(i){var delay=opts.speed/3*2/opts.gridHorizontal*(opts.gridHorizontal-i);$(this).delay(delay).animate({height:opts.height/opts.gridHorizontal,opacity:1},opts.speed/3);}).first().queue(function(){the._afterTransfer();});},'mosaic':function(){var the=this,node=the.node,opts=the.options;var max=0;var index=0;the._setStage(0);node.transfer.children().css({opacity:0}).each(function(i){var delay=opts.speed/2*Math.random();if(delay>max){max=delay;index=$(this).index();}
        $(this).delay(delay).animate({opacity:1},opts.speed/2,'linear');}).eq(index).queue(function(){the._afterTransfer();});},'bomb':function(){var the=this,node=the.node,opts=the.options;var max=0;var index=0;var gridWidth=opts.width/opts.gridCol;var gridHeight=opts.height/opts.gridRow;the._setStage(0);node.transfer.children().css({top:(opts.height-gridHeight)/2,left:(opts.width-gridWidth)/2,opacity:0}).each(function(i){var x=i%opts.gridCol;var y=Math.floor(i/opts.gridCol);var top=gridHeight*y;var left=gridWidth*x;var delay=opts.speed/2*Math.random();if(delay>max){max=delay;index=$(this).index();}
        $(this).delay(delay).animate({top:top,left:left,opacity:1},opts.speed/2);}).eq(index).queue(function(){the._afterTransfer();});},'fumes':function(){var the=this,node=the.node,opts=the.options;the._setStage(0);node.transfer.children().css({width:opts.width/opts.gridCol*2,height:opts.height/opts.gridRow*2,opacity:0}).each(function(i){var delay=opts.speed/3*2/node.transfer.children().length*(i+1);$(this).delay(delay).animate({width:opts.width/opts.gridCol,height:opts.height/opts.gridRow,opacity:1},opts.speed/3);}).last().queue(function(){the._afterTransfer();});},'interlaceLeft':function(){var the=this,node=the.node,opts=the.options;the._setStage(2);node.transfer.children().css({opacity:0}).each(function(i){var delay=opts.speed/3*2/opts.gridVertical*(i+1);$(this).css({top:i%2>0?-opts.height:opts.height}).delay(delay).animate({top:0,opacity:1},opts.speed/3);}).last().queue(function(){the._afterTransfer();});},'interlaceRight':function(){var the=this,node=the.node,opts=the.options;the._setStage(2);node.transfer.children().css({opacity:0}).each(function(i){var delay=opts.speed/3*2/opts.gridVertical*(opts.gridVertical-i);$(this).css({top:i%2>0?-opts.height:opts.height}).delay(delay).animate({top:0,opacity:1},opts.speed/3);}).first().queue(function(){the._afterTransfer();});},'curtainLeft':function(){var the=this,node=the.node,opts=the.options;the._setStage(2);node.transfer.children().css({height:0,opacity:0}).each(function(i){var delay=opts.speed/3*2/opts.gridVertical*(i+1);$(this).delay(delay).animate({top:0,height:opts.height,opacity:1},opts.speed/3);}).last().queue(function(){the._afterTransfer();});},'curtainRight':function(){var the=this,node=the.node,opts=the.options;the._setStage(2);node.transfer.children().css({height:0,opacity:0}).each(function(i){var delay=opts.speed/3*2/opts.gridVertical*(opts.gridVertical-i);$(this).delay(delay).animate({top:0,height:opts.height,opacity:1},opts.speed/3);}).first().queue(function(){the._afterTransfer();});}});})(jQuery);

    $(function() {
        $('#slider').vmcSlider({
            width: 1200,
            height: 375,
            gridCol: 10,
            gridRow: 5,
            gridVertical: 20,
            gridHorizontal: 10,
            autoPlay: true,
            ascending: true,
            effects: [
                'fade', 'fadeLeft', 'fadeRight', 'fadeTop', 'fadeBottom', 'fadeTopLeft', 'fadeBottomRight',
                'blindsLeft', 'blindsRight', 'blindsTop', 'blindsBottom', 'blindsTopLeft', 'blindsBottomRight',
                'curtainLeft', 'curtainRight', 'interlaceLeft', 'interlaceRight', 'mosaic', 'bomb', 'fumes'
            ],
            ie6Tidy: false,
            random: false,
            duration: 2000,
            speed: 900
        });
    });
</script>




